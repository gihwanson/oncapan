# 테스트 가이드

## 테스트 전 준비사항

### 1. 필수 패키지 설치
```bash
cd oncapan_macro
pip install -r requirements.txt
```

### 2. OpenAI API 키 준비
- OpenAI 계정에서 API 키 발급
- 테스트용으로 충분한 크레딧 확인

### 3. 테스트 계정 준비
- 온카판 테스트 계정 (실제 댓글 작성 테스트용)

## 단계별 테스트 방법

### 1단계: 기본 실행 테스트
**목적**: 프로그램이 정상적으로 실행되는지 확인

```bash
python main.py
```

**확인 사항**:
- [ ] GUI 창이 정상적으로 열리는가?
- [ ] 모든 입력 필드가 보이는가?
- [ ] 버튼들이 정상적으로 작동하는가?

### 2단계: 설정 저장/로드 테스트
**목적**: 암호화된 설정 저장 기능 확인

**테스트 방법**:
1. 아이디, 비밀번호, API 키 입력
2. "설정 저장" 버튼 클릭
3. 프로그램 종료 후 다시 실행
4. 저장된 정보가 자동으로 로드되는지 확인

**확인 사항**:
- [ ] 설정 저장 시 성공 메시지 표시
- [ ] `config.json` 파일 생성 확인
- [ ] `key.key` 파일 생성 확인
- [ ] 재실행 시 정보 자동 로드 확인

### 3단계: 로그인 테스트 (테스트 모드)
**목적**: 로그인 기능이 정상 작동하는지 확인

**테스트 방법**:
1. "테스트 모드" 체크박스 선택
2. 로그인 정보 입력
3. "시작" 버튼 클릭
4. 로그 확인

**확인 사항**:
- [ ] 로그인 성공 메시지 표시
- [ ] 로그인 실패 시 적절한 에러 메시지
- [ ] 재시도 로직 작동 확인

### 4단계: 게시글 목록 가져오기 테스트
**목적**: 게시글 파싱이 정상 작동하는지 확인

**테스트 방법**:
1. 테스트 모드로 실행
2. 로그에서 "게시글 X개 가져옴" 메시지 확인
3. 게시글 제목과 URL이 정상적으로 파싱되는지 확인

**확인 사항**:
- [ ] 게시글 목록이 정상적으로 가져와지는가?
- [ ] 게시글 ID가 정상적으로 추출되는가?
- [ ] 게시글 URL이 올바른가?

### 5단계: 게시글 내용 가져오기 테스트
**목적**: 게시글 본문 파싱 확인

**테스트 방법**:
1. 테스트 모드로 실행
2. 로그에서 "게시글 처리 중" 메시지 확인
3. 게시글 내용이 정상적으로 추출되는지 확인

**확인 사항**:
- [ ] 게시글 내용이 추출되는가?
- [ ] 내용이 너무 짧거나 비어있지 않은가?

### 6단계: AI 댓글 생성 테스트
**목적**: OpenAI API 연동 확인

**테스트 방법**:
1. 유효한 OpenAI API 키 입력
2. 테스트 모드로 실행
3. "AI 댓글 생성 중" 로그 확인
4. 생성된 댓글 내용 확인

**확인 사항**:
- [ ] 댓글이 정상적으로 생성되는가?
- [ ] 댓글이 자연스러운가?
- [ ] API 오류 시 적절한 에러 메시지가 표시되는가?

### 7단계: 댓글 작성 테스트 (테스트 모드)
**목적**: 댓글 작성 로직 확인 (실제 작성 안 함)

**테스트 방법**:
1. 테스트 모드 체크
2. 실행
3. 로그에서 "[테스트 모드] 댓글 작성 시뮬레이션" 확인

**확인 사항**:
- [ ] 테스트 모드에서 실제 댓글이 작성되지 않는가?
- [ ] 시뮬레이션 로그가 정상적으로 출력되는가?

### 8단계: 실제 댓글 작성 테스트 (소규모)
**목적**: 실제 댓글 작성 기능 확인

**⚠️ 주의**: 이 단계는 실제로 댓글이 작성됩니다!

**테스트 방법**:
1. 테스트 모드 체크 해제
2. 최소 대기 시간을 짧게 설정 (예: 1-2초)
3. 게시글 접속 후 대기 시간을 짧게 설정 (예: 1초)
4. 1-2개 게시글만 처리되도록 빠르게 중지
5. 실제 사이트에서 댓글이 작성되었는지 확인

**확인 사항**:
- [ ] 댓글이 실제로 작성되는가?
- [ ] 댓글 내용이 올바른가?
- [ ] 이미 댓글 단 게시글은 건너뛰는가?

### 9단계: 에러 처리 테스트
**목적**: 다양한 에러 상황에서의 동작 확인

**테스트 시나리오**:
1. **잘못된 로그인 정보**: 로그인 실패 시 재시도 확인
2. **잘못된 API 키**: API 오류 처리 확인
3. **네트워크 오류**: 인터넷 연결 끊기 후 동작 확인
4. **빈 게시글 목록**: 게시글이 없을 때 처리 확인

**확인 사항**:
- [ ] 각 에러 상황에서 적절한 메시지 표시
- [ ] 프로그램이 크래시하지 않음
- [ ] 재시도 로직이 작동함

### 10단계: 장시간 실행 테스트
**목적**: 메모리 누수 및 안정성 확인

**테스트 방법**:
1. 테스트 모드로 실행
2. 1-2시간 정도 실행
3. 메모리 사용량 모니터링
4. 로그 파일 크기 확인

**확인 사항**:
- [ ] 메모리 사용량이 계속 증가하지 않음
- [ ] 로그 파일이 과도하게 커지지 않음
- [ ] 프로그램이 안정적으로 실행됨

## 문제 발생 시 체크리스트

### 로그인 실패
- [ ] 아이디/비밀번호가 올바른가?
- [ ] 로그인 URL이 올바른가? (`/login`)
- [ ] 사이트 구조가 변경되었는가?
- [ ] 로그에서 구체적인 오류 메시지 확인

### 게시글을 찾을 수 없음
- [ ] 게시판 URL이 올바른가? (`/bbs/free`)
- [ ] HTML 구조가 변경되었는가?
- [ ] 로그인 상태가 유지되는가?

### 댓글 작성 실패
- [ ] 댓글 폼 구조가 변경되었는가?
- [ ] 필요한 필드가 모두 포함되었는가?
- [ ] 로그인 세션이 유지되는가?

### AI 댓글 생성 실패
- [ ] API 키가 유효한가?
- [ ] API 크레딧이 충분한가?
- [ ] 네트워크 연결이 정상인가?

## 로그 파일 확인

로그는 `macro.log` 파일에 저장됩니다.
문제 발생 시 이 파일을 확인하세요.

```bash
# 최근 로그 확인
tail -n 100 macro.log

# 에러만 확인
grep -i error macro.log
```

